!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s="./src/js/index.js")}({"./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";eval("\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\ndocument.addEventListener('DOMContentLoaded', function (event) {\n  var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 400);\n  var buttonUp = document.querySelector('.button-up');\n  var toggler = void 0;\n\n  function menuHandler() {\n    var hamburger = document.querySelector('.hamburger');\n    var menu = document.querySelector('.menu');\n    var closer = document.querySelector('.menu__closer');\n    if (hamburger) {\n      hamburger.addEventListener('click', function () {\n        menu.classList.add('active');\n        switchOverflow(open);\n      });\n    }\n    if (closer) {\n      closer.addEventListener('click', function () {\n        menu.classList.remove('active');\n        switchOverflow(false);\n      });\n    }\n    window.onclick = function (event) {\n      if (event.target === menu) {\n        menu.classList.remove('active');\n        switchOverflow(false);\n      }\n    };\n  }\n  menuHandler();\n\n  function scrollListener() {\n    var scrollPosition = 0;\n    var ticking = false;\n    window.addEventListener('scroll', function (e) {\n      scrollPosition = window.scrollY;\n      if (!ticking) {\n        window.requestAnimationFrame(function () {\n          buttonUpHider(scrollPosition);\n          ticking = false;\n        });\n        ticking = true;\n      }\n    });\n  }\n  scrollListener();\n\n  function buttonUpHider(scrollPosition) {\n    if (buttonUp) {\n      if (scrollPosition > viewportHeight / 2) {\n        buttonUp.classList.remove('display-none');\n      } else {\n        buttonUp.classList.add('display-none');\n      }\n    }\n  }\n\n  function buttonUpHandler() {\n    if (buttonUp) {\n      buttonUp.addEventListener('click', function () {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      });\n    }\n  }\n  buttonUpHandler();\n\n  function starHandler() {\n    var stars = document.querySelectorAll('.item__star');\n    if (stars) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = stars[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var i = _step.value;\n\n          i.addEventListener('click', function () {\n            this.closest('.item').setAttribute('data-fav', this.closest('.item').getAttribute('data-fav') === '0' ? '1' : '0');\n          });\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }\n  starHandler();\n\n  function switchOverflow(open) {\n    if (open) {\n      document.querySelector('body').classList.add('freezePage');\n    } else {\n      document.querySelector('body').classList.remove('freezePage');\n    }\n  }\n\n  function submitButtonHandler() {\n    var form = document.querySelector('.subscribe-form');\n    var submitButton = document.querySelector('.subscribe-form__submit');\n    var email = document.querySelector('.subscribe-form__email');\n    if (submitButton) {\n      submitButton.addEventListener('click', function () {\n        submitForm(form, email);\n      });\n    }\n  }\n  submitButtonHandler();\n\n  function submitForm(form, email) {\n    if (emailValidation(email.value)) {\n      email.classList.remove('error');\n    } else {\n      email.classList.add('error');\n    }\n  }\n\n  function emailValidation(email) {\n    return (/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)\n    );\n  }\n\n  function setPrice() {\n    var items = document.querySelectorAll('.item__price');\n    if (items) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var i = _step2.value;\n\n          var price = i.innerText.replace(/\\D+/g, '');\n          i.closest('.item').setAttribute('data-price', price);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }\n  setPrice();\n\n  function setRooms() {\n    var items = document.querySelectorAll('.item__name');\n    if (items) {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = items[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var i = _step3.value;\n\n          if (i.innerText.includes('Студия')) {\n            i.closest('.item').setAttribute('data-rooms', '0');\n          }\n          if (i.innerText.includes('Однокомнатная')) {\n            i.closest('.item').setAttribute('data-rooms', '1');\n          }\n          if (i.innerText.includes('Двухкомнатная')) {\n            i.closest('.item').setAttribute('data-rooms', '2');\n          }\n          if (i.innerText.includes('Трехкомнатная')) {\n            i.closest('.item').setAttribute('data-rooms', '3');\n          }\n          if (i.innerText.includes('Четырехкомнатная')) {\n            i.closest('.item').setAttribute('data-rooms', '4');\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }\n  setRooms();\n\n  function sort(data) {\n    var wrapper = document.querySelector('.results__content');\n    var children = [].concat(_toConsumableArray(wrapper.children));\n    if (toggler) {\n      children.sort(function (a, b) {\n        return +a.getAttribute(data) - +b.getAttribute(data);\n      }).map(function (node) {\n        return wrapper.appendChild(node);\n      });\n      toggler = false;\n    } else {\n      children.sort(function (a, b) {\n        return +b.getAttribute(data) - +a.getAttribute(data);\n      }).map(function (node) {\n        return wrapper.appendChild(node);\n      });\n      toggler = true;\n    }\n  }\n\n  function priceButtonHandler() {\n    var priceButton = document.querySelector('.sorting__item-price');\n    if (priceButton) {\n      var attr = 'data-price';\n      priceButton.addEventListener('click', function () {\n        sort(attr);\n        priceButton.classList.toggle('active');\n      });\n    }\n  }\n  priceButtonHandler();\n\n  function roomButtonHandler() {\n    var roomButton = document.querySelector('.sorting__item-rooms');\n    if (roomButton) {\n      var attr = 'data-rooms';\n      roomButton.addEventListener('click', function () {\n        sort(attr);\n        roomButton.classList.toggle('active');\n      });\n    }\n  }\n  roomButtonHandler();\n\n  function showMoreButtonHandler() {\n    var wrapper = document.querySelector('.results__content');\n    var showButton = document.querySelector('.show-more');\n    var loader = true;\n    if (showButton) {\n      showButton.addEventListener('click', function () {\n        if (loader) {\n          fetch(new Request('../../items.json'), {\n            mode: 'no-cors'\n          }).then(function (response) {\n            return response.json();\n          }).then(function (data) {\n            var itemsFromJson = data.items.map(itemTemplate).join('');\n            wrapper.insertAdjacentHTML('beforeend', itemsFromJson);\n            loader = false;\n            setPrice();\n            setRooms();\n          }).catch(function (error) {\n            // fetch is unable to load local files, this is a polyfill\n            var itemsFromJson = itemsArray.map(itemTemplate).join('');\n            wrapper.insertAdjacentHTML('beforeend', itemsFromJson);\n            loader = false;\n            setPrice();\n            setRooms();\n            throw new Error(error);\n          });\n        }\n        setTimeout(unHideItems, 100);\n      });\n    }\n  }\n  showMoreButtonHandler();\n\n  function unHideItems() {\n    var hiddenItems = document.querySelectorAll('.results__content .item.display-none');\n\n    if (hiddenItems.length > 0) {\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = hiddenItems[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var i = _step4.value;\n\n          i.classList.remove('display-none');\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    } else {\n      document.querySelector('.show-more').classList.add('display-none');\n    }\n  }\n\n  function itemTemplate(item) {\n    return '\\n    <div class=\"item display-none ' + item.class + '\">\\n        <div class=\"item__content\">\\n          <div class=\"item__header\">\\n            <div class=\"item__labels\">\\n              <div class=\"item__discount\">-6%</div>\\n              <div class=\"item__star\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 847 1058.8\"><path d=\"M534 310c385 17 369-31 68 209 102 370 142 341-178 130-323 213-281 244-179-130-302-241-318-192 69-209 134-359 85-359 220 0z\"></path></svg>\\n\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\"item__body\">\\n            <div class=\"item__img\"><img src=\"' + item.src + '\"></div><span class=\"item__name\">' + item.name + '</span>\\n            <div class=\"item__description\"><span class=\"item__furnish\">' + item.furnish + '</span>\\n              <div class=\"item__square\"><span class=\"item-square__number\">' + item.square + '</span><span class=\"item-square__text\">\\u043F\\u043B\\u043E\\u0449\\u0430\\u0434\\u044C                 </span></div>\\n              <div class=\"item__floor\"> <span class=\"item-floor__number\">' + item.floor + '</span><span class=\"item-floor__text\">\\u044D\\u0442\\u0430\\u0436</span></div>\\n            </div><span class=\"item__price\">' + item.pricetext + '</span>\\n          </div>\\n          <div class=\"item__footer\">\\n            <div class=\"item__status\">' + item.status + '</div>\\n          </div>\\n        </div>\\n      </div>\\n  ';\n  }\n\n  var itemsArray = [{\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №1144',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано',\n    discount: '50%',\n    label: 'скидка'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №2244',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано',\n    discount: '50%',\n    label: 'скидка'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }, {\n    class: 'item-booked',\n    src: 'assets/img/plan-1.png',\n    name: 'Студия №3344',\n    furnish: 'без отделки',\n    square: '28 м',\n    floor: '12/14',\n    pricetext: '1 900 000 руб.',\n    status: 'забронировано'\n  }];\n});\n\n//# sourceURL=webpack:///./src/js/index.js?")}});