"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var userEmail=document.querySelector("#user-email"),userName=document.querySelector("#user-name"),userCountry=document.querySelector("#user-country"),userTerms=document.querySelector("input[name='user-terms']"),submitButton=document.querySelector(".button-submit"),formInputs=document.querySelectorAll("#request-form input"),termsWrapper=document.querySelector(".form__input-checkbox"),requestForm=document.querySelector("#request-form"),mailPattern=/^((([0-9A-Za-z]{1}[\x2D\.0-9A-z]+[0-9A-Za-z]{1})|([0-9\u0410-\u044F]{1}[\x2D\.0-9\u0410-\u044F]+[0-9\u0410-\u044F]{1}))@([\x2DA-Za-z]+\.){1,2}[\x2DA-Za-z]{2,})$/,namePattern=/^(([A-Za-z]+(?:[ |-]{1}[A-Za-z]+)*$)|([А-Яа-я]+(?:[|-]{1}[А-Яа-я]+)*$))/;function validateRegex(a,b){return b.test(a)}function validateSelect(a){return 0==!a.selectedIndex}function validateCheckbox(a){return a.checked}function classToggle(a,b,c){!a.classList.contains(b)&&c?a.classList.add(b):a.classList.contains(b)&&!c&&a.classList.remove(b)}function validateSelectors(){for(var a=0,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){b&&a++}),a==c.length}function inputErrorHandler(a,b,c){a?classToggle(b,c,!1):!a&&classToggle(b,c,!0)}function selectCountryErrorHandler(){validateSelect(userCountry)?validateSelectors(userCountry)&&(classToggle(userCountry.parentElement,"error",!1),classToggle(userCountry.parentElement,"selected",!0)):classToggle(userCountry.parentElement,"error",!0)}function submitHandler(){submitButton.addEventListener("click",function(a){a.preventDefault(),inputErrorHandler(validateRegex(userName.value,namePattern),userName.parentElement,"error"),inputErrorHandler(validateRegex(userEmail.value,mailPattern),userEmail.parentElement,"error"),inputErrorHandler(validateCheckbox(userTerms),termsWrapper,"error"),selectCountryErrorHandler(),validateRegex(userEmail.value,mailPattern)&&validateRegex(userName.value,namePattern)&&validateSelect(userCountry)&&validateCheckbox(userTerms)&&alert("form validated")})}validateSelectors(submitButton,userEmail,userName,userCountry,userTerms)&&submitHandler();function inputsNotEmptyHandler(a){0<a.value.length?classToggle(a.parentElement,"not-empty",!0):0===a.value.length&&classToggle(a.parentElement,"not-empty",!1)}function formEventDelegator(){requestForm.addEventListener("input",function(a){switch(a.target.id){case"user-email":inputErrorHandler(validateRegex(userEmail.value,mailPattern),userEmail.parentElement,"error"),inputsNotEmptyHandler(a.target);break;case"user-name":inputErrorHandler(validateRegex(userName.value,namePattern),userName.parentElement,"error"),inputsNotEmptyHandler(a.target);break;case"user-terms":inputErrorHandler(validateCheckbox(userTerms),termsWrapper,"error");break;case"user-country":selectCountryErrorHandler();}})}validateSelectors(formInputs,userName,userEmail,userTerms,userCountry)&&formEventDelegator();var inputClosers=document.querySelectorAll(".input-close"),iconCubes=document.querySelectorAll(".icon-cubes"),posts=document.querySelectorAll(".post"),infoItems=document.querySelectorAll(".info__list li"),modal=document.querySelector(".modal"),modalCloser=document.querySelector(".close-round"),modalHyperlink=document.querySelector(".modal .hyperlink");validateSelectors(inputClosers)&&inputClosers.forEach(function(a){a.addEventListener("click",function(){this.parentElement.firstChild.value="",this.parentElement.classList.remove("not-empty","error")})}),validateSelectors(iconCubes,posts)&&iconCubes.forEach(function(a,b){a.addEventListener("click",function(){posts[b].classList.toggle("open")})}),validateSelectors(infoItems,modal)&&infoItems.forEach(function(a){a.addEventListener("click",function(){modal.classList.add("active")})}),validateSelectors(modalCloser,modal)&&modalCloser.addEventListener("click",function(){modal.classList.remove("active")}),validateSelectors(modalHyperlink,modal)&&modalHyperlink.addEventListener("click",function(){modal.classList.remove("active")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwiTm9kZUxpc3QiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJ1c2VyTmFtZSIsImRvY3VtZW50IiwidXNlckNvdW50cnkiLCJ1c2VyRW1haWwiLCJxdWVyeVNlbGVjdG9yIiwidXNlclRlcm1zIiwic3VibWl0QnV0dG9uIiwiZm9ybUlucHV0cyIsInRlcm1zV3JhcHBlciIsIm5hbWVQYXR0ZXJuIiwic2VsZWN0IiwiY2hlY2tib3giLCJlbGVtZW50IiwiY2xhc3NUb2dnbGUiLCJzdW0iLCJhcmdzIiwidmFsaWRhdGVTZWxlY3RvcnMiLCJpdGVtIiwiZWxlbSIsInZhbGlkYXRlIiwiY2xhc3NOYW1lIiwiZXZlbnQiLCJwYXJlbnRFbGVtZW50IiwiaW5wdXRFcnJvckhhbmRsZXIiLCJ2YWxpZGF0ZUNoZWNrYm94Iiwic2VsZWN0Q291bnRyeUVycm9ySGFuZGxlciIsInZhbGlkYXRlUmVnZXgiLCJzdWJtaXRIYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiYWxlcnQiLCJpbnB1dHNOb3RFbXB0eUhhbmRsZXIiLCJyZXF1ZXN0Rm9ybSIsImZvcm1FdmVudERlbGVnYXRvciIsImlucHV0Q2xvc2VycyIsImljb25DdWJlcyIsInBvc3RzIiwiaW5mb0l0ZW1zIiwibW9kYWxIeXBlcmxpbmsiLCJxdWVyeVNlbGVjdG9yQWxsIiwibW9kYWwiXSwibWFwcGluZ3MiOiJhQUNJQSxNQUFNLENBQU5BLFFBQUFBLEVBQW1CLENBQUNDLFFBQVEsQ0FBUkEsU0FBQUEsQ0FBeEIsTyxHQURBQSxRQUFBLENBQUFBLFNBQUFBLENBQUFBLE9BQUFBLENBQUFDLEtBQUEsQ0FBQUEsU0FBQUEsQ0FBQUQsTyxLQUVFQSxDQUFBQSxTQUFTRSxDQUFBQSxRQUFVQyxDQUFWRCxhQUFBQSxDQUFURixhQUFTRSxDLENBQ1ZFLFFBQUEsQ0FBQUMsUUFBQSxDQUFBQSxhQUFBQSxDQUFBLFlBQUFBLEMs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QUFBLFFBQUFBLENBREZvQixDQUFBQSxDLENBS0RyQixpQkFBQSxDQUFBLGNBQUEsQ0FBQSxLQUFBLEMsRUFTQ3NCLGNBQWMsQ0FBZEEsZ0JBQUFBLENBQUFBLE9BQUFBLENBQXlDLFVBQVcsQ0FQbER0QixLQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxNQUFBQSxDQUFBQSxRQUFBQSxDQU9Gc0IsQ0FBQUEsQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSUUxMSBQb2x5ZmlsbCBmb3JFYWNoIHBvbHlmaWxsXG5pZiAod2luZG93Lk5vZGVMaXN0ICYmICFOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCkge1xuICBOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoO1xufVxuY29uc3QgdXNlckVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItZW1haWwnKTtcbmNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItbmFtZScpO1xuY29uc3QgdXNlckNvdW50cnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1jb3VudHJ5Jyk7XG5jb25zdCB1c2VyVGVybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0ndXNlci10ZXJtcyddXCIpO1xuY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1zdWJtaXQnKTtcbmNvbnN0IGZvcm1JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmVxdWVzdC1mb3JtIGlucHV0Jyk7XG5jb25zdCB0ZXJtc1dyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXQtY2hlY2tib3gnKTtcbmNvbnN0IHJlcXVlc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlcXVlc3QtZm9ybScpO1xuY29uc3QgbWFpbFBhdHRlcm4gPSAvXigoKFswLTlBLVphLXpdezF9Wy0wLTlBLXpcXC5dezEsfVswLTlBLVphLXpdezF9KXwoWzAtOdCQLdCv0LAt0Y9dezF9Wy0wLTnQkC3Rj1xcLl17MSx9WzAtOdCQLdCv0LAt0Y9dezF9KSlAKFstQS1aYS16XXsxLH1cXC4pezEsMn1bLUEtWmEtel17Mix9KSQvdTtcbmNvbnN0IG5hbWVQYXR0ZXJuID0gL14oKFtBLVphLXpdKyg/OlsgfC1dezF9W0EtWmEtel0rKSokKXwoW9CQLdCv0LAt0Y9dKyg/Olt8LV17MX1b0JAt0K/QsC3Rj10rKSokKSkvO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZVJlZ2V4KGVsZW1lbnQsIHBhdHRlcm4pIHtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdChlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVTZWxlY3Qoc2VsZWN0KSB7XG4gIHJldHVybiAhc2VsZWN0LnNlbGVjdGVkSW5kZXggPT0gMDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVDaGVja2JveChjaGVja2JveCkge1xuICByZXR1cm4gY2hlY2tib3guY2hlY2tlZDtcbn1cblxuZnVuY3Rpb24gY2xhc3NUb2dnbGUoZWxlbWVudCwgY2xhc3NOYW1lLCB0dXJuT24pIHtcbiAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpICYmIHR1cm5Pbikge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9IGVsc2UgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgJiYgIXR1cm5Pbikge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU2VsZWN0b3JzKC4uLmFyZ3MpIHtcbiAgbGV0IHN1bSA9IDA7XG4gIGFyZ3MuZm9yRWFjaChpdGVtID0+IHtcbiAgICBpZiAoaXRlbSkgc3VtKys7XG4gIH0pO1xuICByZXR1cm4gc3VtID09IGFyZ3MubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBpbnB1dEVycm9ySGFuZGxlcih2YWxpZGF0ZSwgZWxlbSwgY2xhc3NOYW1lKSB7XG4gIGlmICh2YWxpZGF0ZSkge1xuICAgIGNsYXNzVG9nZ2xlKGVsZW0sIGNsYXNzTmFtZSwgZmFsc2UpO1xuICB9IGVsc2UgaWYgKCF2YWxpZGF0ZSkge1xuICAgIGNsYXNzVG9nZ2xlKGVsZW0sIGNsYXNzTmFtZSwgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VsZWN0Q291bnRyeUVycm9ySGFuZGxlcigpIHtcbiAgaWYgKCF2YWxpZGF0ZVNlbGVjdCh1c2VyQ291bnRyeSkpIHtcbiAgICBjbGFzc1RvZ2dsZSh1c2VyQ291bnRyeS5wYXJlbnRFbGVtZW50LCAnZXJyb3InLCB0cnVlKTtcbiAgfSBlbHNlIGlmICh2YWxpZGF0ZVNlbGVjdG9ycyh1c2VyQ291bnRyeSkpIHtcbiAgICBjbGFzc1RvZ2dsZSh1c2VyQ291bnRyeS5wYXJlbnRFbGVtZW50LCAnZXJyb3InLCBmYWxzZSk7XG4gICAgY2xhc3NUb2dnbGUodXNlckNvdW50cnkucGFyZW50RWxlbWVudCwgJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3VibWl0SGFuZGxlcigpIHtcbiAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaW5wdXRFcnJvckhhbmRsZXIodmFsaWRhdGVSZWdleCh1c2VyTmFtZS52YWx1ZSwgbmFtZVBhdHRlcm4pLCB1c2VyTmFtZS5wYXJlbnRFbGVtZW50LCAnZXJyb3InKTtcbiAgICBpbnB1dEVycm9ySGFuZGxlcih2YWxpZGF0ZVJlZ2V4KHVzZXJFbWFpbC52YWx1ZSwgbWFpbFBhdHRlcm4pLCB1c2VyRW1haWwucGFyZW50RWxlbWVudCwgJ2Vycm9yJyk7XG4gICAgaW5wdXRFcnJvckhhbmRsZXIodmFsaWRhdGVDaGVja2JveCh1c2VyVGVybXMpLCB0ZXJtc1dyYXBwZXIsICdlcnJvcicpO1xuICAgIHNlbGVjdENvdW50cnlFcnJvckhhbmRsZXIoKTtcbiAgICBpZiAoXG4gICAgICB2YWxpZGF0ZVJlZ2V4KHVzZXJFbWFpbC52YWx1ZSwgbWFpbFBhdHRlcm4pICYmXG4gICAgICB2YWxpZGF0ZVJlZ2V4KHVzZXJOYW1lLnZhbHVlLCBuYW1lUGF0dGVybikgJiZcbiAgICAgIHZhbGlkYXRlU2VsZWN0KHVzZXJDb3VudHJ5KSAmJlxuICAgICAgdmFsaWRhdGVDaGVja2JveCh1c2VyVGVybXMpXG4gICAgKSB7XG4gICAgICBhbGVydCgnZm9ybSB2YWxpZGF0ZWQnKTtcbiAgICB9XG4gIH0pO1xufVxuaWYgKHZhbGlkYXRlU2VsZWN0b3JzKHN1Ym1pdEJ1dHRvbiwgdXNlckVtYWlsLCB1c2VyTmFtZSwgdXNlckNvdW50cnksIHVzZXJUZXJtcykpIHtcbiAgc3VibWl0SGFuZGxlcigpO1xufVxuXG5mdW5jdGlvbiBpbnB1dHNOb3RFbXB0eUhhbmRsZXIoZWxlbSkge1xuICBpZiAoZWxlbS52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgY2xhc3NUb2dnbGUoZWxlbS5wYXJlbnRFbGVtZW50LCAnbm90LWVtcHR5JywgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAoZWxlbS52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICBjbGFzc1RvZ2dsZShlbGVtLnBhcmVudEVsZW1lbnQsICdub3QtZW1wdHknLCBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9ybUV2ZW50RGVsZWdhdG9yKCkge1xuICByZXF1ZXN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHtcbiAgICBzd2l0Y2ggKGV2ZW50LnRhcmdldC5pZCkge1xuICAgICAgY2FzZSAndXNlci1lbWFpbCc6XG4gICAgICAgIGlucHV0RXJyb3JIYW5kbGVyKHZhbGlkYXRlUmVnZXgodXNlckVtYWlsLnZhbHVlLCBtYWlsUGF0dGVybiksIHVzZXJFbWFpbC5wYXJlbnRFbGVtZW50LCAnZXJyb3InKTtcbiAgICAgICAgaW5wdXRzTm90RW1wdHlIYW5kbGVyKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndXNlci1uYW1lJzpcbiAgICAgICAgaW5wdXRFcnJvckhhbmRsZXIodmFsaWRhdGVSZWdleCh1c2VyTmFtZS52YWx1ZSwgbmFtZVBhdHRlcm4pLCB1c2VyTmFtZS5wYXJlbnRFbGVtZW50LCAnZXJyb3InKTtcbiAgICAgICAgaW5wdXRzTm90RW1wdHlIYW5kbGVyKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndXNlci10ZXJtcyc6XG4gICAgICAgIGlucHV0RXJyb3JIYW5kbGVyKHZhbGlkYXRlQ2hlY2tib3godXNlclRlcm1zKSwgdGVybXNXcmFwcGVyLCAnZXJyb3InKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1c2VyLWNvdW50cnknOlxuICAgICAgICBzZWxlY3RDb3VudHJ5RXJyb3JIYW5kbGVyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSk7XG59XG5pZiAodmFsaWRhdGVTZWxlY3RvcnMoZm9ybUlucHV0cywgdXNlck5hbWUsIHVzZXJFbWFpbCwgdXNlclRlcm1zLCB1c2VyQ291bnRyeSkpIHtcbiAgZm9ybUV2ZW50RGVsZWdhdG9yKCk7XG59XG5cblxuY29uc3QgaW5wdXRDbG9zZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LWNsb3NlJyk7XG5jb25zdCBpY29uQ3ViZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbi1jdWJlcycpO1xuY29uc3QgcG9zdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9zdCcpO1xuY29uc3QgaW5mb0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmluZm9fX2xpc3QgbGknKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG5jb25zdCBtb2RhbENsb3NlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1yb3VuZCcpO1xuY29uc3QgbW9kYWxIeXBlcmxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwgLmh5cGVybGluaycpO1xuXG5pZiAodmFsaWRhdGVTZWxlY3RvcnMoaW5wdXRDbG9zZXJzKSkge1xuICBpbnB1dENsb3NlcnMuZm9yRWFjaChpdGVtID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZmlyc3RDaGlsZC52YWx1ZSA9ICcnO1xuICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ25vdC1lbXB0eScsICdlcnJvcicpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuaWYgKHZhbGlkYXRlU2VsZWN0b3JzKGljb25DdWJlcywgcG9zdHMpKSB7XG4gIGljb25DdWJlcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIHBvc3RzW2luZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5pZiAodmFsaWRhdGVTZWxlY3RvcnMoaW5mb0l0ZW1zLCBtb2RhbCkpIHtcbiAgaW5mb0l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5pZiAodmFsaWRhdGVTZWxlY3RvcnMobW9kYWxDbG9zZXIsIG1vZGFsKSkge1xuICBtb2RhbENsb3Nlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICB9KTtcbn1cblxuaWYgKHZhbGlkYXRlU2VsZWN0b3JzKG1vZGFsSHlwZXJsaW5rLCBtb2RhbCkpIHtcbiAgbW9kYWxIeXBlcmxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfSk7XG59XG4iXX0=
